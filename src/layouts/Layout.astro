---
import { SEO } from "astro-seo";

interface Props {
  title: string;
  description: string;
  keywords?: string;
  ogImage?: string;
}

const { 
  title, 
  description,
  keywords = "DJ, eventos, fiestas, matrimonios, cumpleaños, DJ Chile, DJ Maipú, animación, karaoke, sonido profesional, iluminación, DJ profesional, eventos corporativos, graduaciones, bautizos",
  ogImage = "/djpablitodyrweb.png"
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const ogImageURL = new URL(ogImage, Astro.site);

// Structured Data (JSON-LD)
const structuredData = {
  "@context": "https://schema.org",
  "@type": "ProfessionalService",
  "name": "DJ Pablito Dyr Producciones",
  "image": ogImageURL.toString(),
  "description": description,
  "@id": Astro.site?.toString(),
  "url": Astro.site?.toString(),
  "telephone": "+56994296961",
  "priceRange": "$$",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Maipú",
    "addressRegion": "Región Metropolitana",
    "addressCountry": "CL"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "addressCountry": "CL"
  },
  "sameAs": [
    "https://www.instagram.com/djpablitodyr/",
    "https://www.tiktok.com/@djpablitodyr"
  ],
  "offers": {
    "@type": "AggregateOffer",
    "priceCurrency": "CLP"
  },
  "areaServed": {
    "@type": "Country",
    "name": "Chile"
  }
};
---

<!doctype html>
<html lang="es-CL">
  <head>
    <SEO
      title={`${title} | DJ Profesional en Chile`}
      description={description}
      canonical={canonicalURL.toString()}
      openGraph={{
        basic: {
          title: `${title} | DJ Profesional en Chile`,
          type: "website",
          image: ogImageURL.toString(),
          url: canonicalURL.toString()
        },
        optional: {
          description: description,
          locale: "es_CL",
          siteName: "DJ Pablito Dyr Producciones"
        },
        image: {
          url: ogImageURL.toString(),
          secureUrl: ogImageURL.toString(),
          type: "image/png",
          width: 1200,
          height: 630,
          alt: "DJ Pablito Dyr - DJ Profesional en Chile"
        }
      }}
      twitter={{
        card: "summary_large_image",
        site: "@djpablitodyr",
        creator: "@djpablitodyr",
        title: `${title} | DJ Profesional en Chile`,
        description: description,
        image: ogImageURL.toString(),
        imageAlt: "DJ Pablito Dyr - DJ Profesional en Chile"
      }}
      extend={{
        link: [
          { rel: "icon", href: "/favicon.webp" },
          { rel: "sitemap", href: "/sitemap-index.xml" }
        ],
        meta: [
          { name: "keywords", content: keywords },
          { name: "author", content: "DJ Pablito Dyr" },
          { name: "robots", content: "index, follow" },
          { name: "googlebot", content: "index, follow" },
          { name: "theme-color", content: "#27272a" },
          { httpEquiv: "Content-Language", content: "es-CL" },
          { property: "og:locale", content: "es_CL" }
        ],
      }}
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Structured Data -->
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preload" as="image" href="/logo.webp" />
    <link rel="dns-prefetch" href="https://www.youtube.com" />
  </head>
  <body class="bg-zinc-900">
    <slot />
    <style is:global>
      body {
      }
    </style>
  </body>
</html>
